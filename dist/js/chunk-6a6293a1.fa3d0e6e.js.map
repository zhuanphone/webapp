{"version":3,"sources":["webpack:///./src/views/Order/Order.vue?1f1d","webpack:///./src/views/Order/Order.vue","webpack:///./src/views/Order/Order.vue?baab","webpack:///./src/views/Order/Order.vue?d01d","webpack:///./src/views/Order/Order.vue?9b67"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","fixed","title","slot","to","icon","_v","placeholder","type","model","value","orderInfo","callback","$$v","$set","expression","rows","_l","good","key","id","src","getThumb","href","_s","name","purchasePrice","_e","_m","getPrice","toFixed","amount","on","click","$event","handleSubmitOrder","staticRenderFns","Ordervue_type_script_lang_ts_Order","_Vue","Order","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","imgs","url","goods","length","num","console","log","action","count","changeOrderGood","address","phone","utils","map","_id","reduce","ret","cur","submitOrder","then","res","status","_res$result","result","order","payurl","window","location","mint_ui_common","message","vue_property_decorator","tslib_es6","lib","namespace","components","_components","defineProperty","Ordervue_type_script_lang_ts_","Order_Ordervue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_7c604f05_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_7c604f05_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-6a6293a1.fa3d0e6e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order order-wrap\"},[_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"确认下单\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}})],1)],1),_c('div',{staticClass:\"order-content\"},[_c('section',[_c('h5',[_vm._v(\"收货人姓名\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货人姓名\",\"type\":\"tel\"},model:{value:(_vm.orderInfo.receivername),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"receivername\", $$v)},expression:\"orderInfo.receivername\"}})],1),_c('section',[_c('h5',[_vm._v(\"收货人电话\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货人电话\",\"type\":\"tel\"},model:{value:(_vm.orderInfo.phone),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"phone\", $$v)},expression:\"orderInfo.phone\"}})],1),_c('section',[_c('h5',[_vm._v(\"收货地址\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货地址\",\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.orderInfo.address),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"address\", $$v)},expression:\"orderInfo.address\"}})],1),_c('section',[_c('div',{staticClass:\"cart-area\"},[_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.orderInfo.goods),function(good){return (_vm.orderInfo.goods)?_c('div',{key:good.id,staticClass:\"cart-item\"},[_c('div',{staticClass:\"cart-item-box\"},[_c('div',{staticClass:\"item-detail\"},[_c('div',[_c('div',{staticClass:\"item-img\"},[_c('a',[_c('img',{attrs:{\"src\":_vm.getThumb(good)}})])]),_c('div',{staticClass:\"item-info\"},[_c('a',{attrs:{\"href\":\"\"}},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(good.name))])]),_c('div',{staticClass:\"pay\"},[_c('div',{staticClass:\"pay-price\"},[_c('div',{staticClass:\"price\"},[_c('p',{staticClass:\"o-t-price\"},[_c('span',{staticClass:\"major\"},[_vm._v(_vm._s(good.purchasePrice))])])])])])])])])])]):_vm._e()}),0)])]),_vm._m(0),_c('section',[_c('div',{staticClass:\"order-info price\"},[_c('span',[_vm._v(\"商品总额\")]),_c('h5',[_vm._v(\"￥\"+_vm._s(_vm.getPrice(_vm.orderInfo)))])]),_vm._m(1)])]),_c('div',{staticClass:\"order-footer\"},[_c('h5',{staticClass:\"order-total-price\"},[_vm._v(\"合计：￥\"+_vm._s(_vm.toFixed(_vm.orderInfo.amount)))]),_c('button',{staticClass:\"bottom-bar-btn buy\",on:{\"click\":function($event){return _vm.handleSubmitOrder()}}},[_vm._v(\"确认下单\")])])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{staticClass:\"order-info\"},[_c('span',[_vm._v(\"支付方式\")]),_c('h5',[_vm._v(\"在线支付\")])]),_c('div',{staticClass:\"order-info\"},[_c('span',[_vm._v(\"配送方式\")]),_c('h5',[_vm._v(\"快递配送\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order-info\"},[_c('span',[_vm._v(\"运费\")]),_c('h5',[_vm._v(\"￥0.00\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { State, Action, Getter } from 'vuex-class';\n\nimport { Header, Button, Field, Toast } from 'mint-ui';\nimport { checkPhoneNumber } from '@/utils';\n\n@Component({\n  components: {\n    [Header.name]: Header,\n    [Button.name]: Button,\n    [Field.name]: Field,\n  },\n})\nexport default class Order extends Vue {\n  @Getter('orderInfo', { namespace: 'order' })\n  orderInfo: any;\n\n  @Getter('currentUser', { namespace: 'auth' })\n  currentUser: any;\n\n  // get orderAmount() {\n  //   const ret = (this.orderInfo.goods as any[]).reduce(function(ret, cur) {\n  //     return ret + cur.originPrice;\n  //   }, 0);\n\n  //   return ret.toFixed(2);\n  // }\n\n  getThumb(good: StoreState.Goods) {\n    if (good && good.imgs) {\n      return good.imgs[0].url;\n    }\n  }\n\n  getPrice(orderInfo: any) {\n    if (orderInfo.goods && orderInfo.goods.length > 0) {\n      return orderInfo.goods[0].purchasePrice.toFixed(2);\n    }\n  }\n\n  toFixed(num: number) {\n    console.log('num.toFixed(2): ', num.toFixed(2));\n    if (num) {\n      return num.toFixed(2);\n    } else {\n      return 0;\n    }\n  }\n\n  @Action('order/changeOrderGood')\n  changeOrderGood: any;\n\n  private changeGoodCount(good: StoreState.GoodsInOrder, action: string) {\n    console.log('good: ', good);\n    switch (action) {\n      case 'minus':\n        good.count -= 1;\n        break;\n      case 'plus':\n        good.count += 1;\n        break;\n      default:\n        break;\n    }\n    this.changeOrderGood(good);\n  }\n\n  @Action('order/submitOrder')\n  submitOrder: any;\n\n  private handleSubmitOrder() {\n    if (!this.orderInfo.address) {\n      Toast({\n        message: '收货地址不能为空！',\n      });\n      return;\n    }\n\n    if (!this.orderInfo.phone) {\n      Toast({\n        message: '收货人手机号不能为空！',\n      });\n      return;\n    }\n\n    if (!checkPhoneNumber(this.orderInfo.phone)) {\n      Toast({\n        message: '手机号格式不正确！',\n      });\n      return;\n    }\n\n    const goods = this.orderInfo.goods as StoreState.GoodsInOrder[];\n    this.orderInfo.goods = goods.map(good => ({\n      id: good._id,\n      count: good.count,\n    }));\n\n    // this.orderInfo.userId = this.currentUser._id;\n    this.orderInfo.amount = goods.reduce(function(ret, cur) {\n      return cur.purchasePrice + ret;\n    }, 0);\n\n    this.submitOrder(this.orderInfo).then((res: StoreState.ResponseData) => {\n      if (res.status === 201) {\n        const { order, payurl } = res.result;\n        const orderId = order._id;\n        window.location = payurl;\n        // this.$router.push({ name: 'payorder', params: orderId });\n      }\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=7c604f05&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=7c604f05&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c604f05\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=7c604f05&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=7c604f05&lang=scss&scoped=true&\""],"sourceRoot":""}