{"version":3,"sources":["webpack:///./src/views/Order/Order.vue?5783","webpack:///./src/views/Order/Order.vue?2d69","webpack:///./src/views/Order/Order.vue","webpack:///./src/views/Order/Order.vue?baab","webpack:///./src/views/Order/Order.vue?d01d"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_b02679c6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_b02679c6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","fixed","title","slot","to","icon","_v","placeholder","type","rows","model","value","orderInfo","callback","$$v","$set","expression","_l","good","key","id","src","imgs","url","href","_s","name","originPrice","on","click","$event","preventDefault","actionBuyQuantity","directives","rawName","modifiers","number","domProps","blur","$forceUpdate","input","target","composing","_n","_e","orderAmount","handleSubmitOrder","staticRenderFns","Ordervue_type_script_lang_ts_Order","_Vue","Order","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","goods","map","goodId","_id","count","console","log","currentUser","userId","amount","reduce","ret","cur","submitOrder","then","res","status","_res$result","result","order","payurl","window","location","get","toFixed","vue_property_decorator","tslib_es6","lib","namespace","components","_components","defineProperty","mint_ui_common","Ordervue_type_script_lang_ts_","Order_Ordervue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-566607d4.a9560dd1.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=b02679c6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=b02679c6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order order-wrap\"},[_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"填写订单\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}})],1)],1),_c('div',{staticClass:\"order-content\"},[_c('section',[_c('h4',[_vm._v(\"收货地址\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货地址\",\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.orderInfo.address),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"address\", $$v)},expression:\"orderInfo.address\"}})],1),_c('section',[_c('h4',[_vm._v(\"商品列表\")]),_c('div',{staticClass:\"cart-area\"},[_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.orderInfo.goods),function(good){return (_vm.orderInfo.goods)?_c('div',{key:good.id,staticClass:\"cart-item\"},[_c('div',{staticClass:\"cart-item-box\"},[_c('div',{staticClass:\"item-detail\"},[_c('div',[_c('div',{staticClass:\"item-img\"},[_c('a',[_c('img',{attrs:{\"src\":good.imgs[0].url}})])]),_c('div',{staticClass:\"item-info\"},[_c('a',{attrs:{\"href\":\"\"}},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(good.name))])]),_c('div',{staticClass:\"pay\"},[_c('div',{staticClass:\"pay-price\"},[_c('div',{staticClass:\"price\"},[_c('p',{staticClass:\"o-t-price\"},[_c('span',{staticClass:\"major\"},[_vm._v(_vm._s(good.originPrice))])])])]),_c('div',{staticClass:\"edit-quantity\"},[_c('p',{staticClass:\"btn-minus\",on:{\"click\":function($event){$event.preventDefault();return _vm.actionBuyQuantity(good, 'minus')}}},[_c('a',{staticClass:\"sbtn minus off\"},[_c('icon',{attrs:{\"name\":\"minus\"}})],1)]),_c('p',{staticClass:\"btn-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(good.count),expression:\"good.count\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\"},domProps:{\"value\":(good.count)},on:{\"blur\":[function($event){return _vm.actionBuyQuantity(good, 'input')},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.$set(good, \"count\", _vm._n($event.target.value))}}})]),_c('p',{staticClass:\"btn-plus\",on:{\"click\":function($event){$event.preventDefault();return _vm.actionBuyQuantity(good, 'plus')}}},[_c('a',{staticClass:\"sbtn plus\"},[_c('icon',{attrs:{\"name\":\"plus\"}})],1)])])])])])])])]):_vm._e()}),0)])])]),_c('div',{staticClass:\"order-footer\"},[_c('h5',{staticClass:\"order-total-price\"},[_vm._v(\"￥\"+_vm._s(_vm.orderAmount))]),_c('button',{staticClass:\"bottom-bar-btn buy\",on:{\"click\":function($event){return _vm.handleSubmitOrder()}}},[_vm._v(\"提交订单\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { State, Action, Getter } from 'vuex-class';\n\nimport { Header, Button, Field } from 'mint-ui';\n\n@Component({\n  components: {\n    [Header.name]: Header,\n    [Button.name]: Button,\n    [Field.name]: Field,\n  },\n})\nexport default class Order extends Vue {\n  @Getter('orderInfo', { namespace: 'order' })\n  orderInfo: any;\n\n  @Getter('currentUser', { namespace: 'auth' })\n  currentUser: any;\n\n  get orderAmount() {\n    const ret = (this.orderInfo.goods as any[]).reduce(function(ret, cur) {\n      return ret + cur.originPrice;\n    }, 0);\n\n    return ret.toFixed(2);\n  }\n\n  @Action('order/submitOrder')\n  submitOrder: any;\n\n  private handleSubmitOrder() {\n    const goods = this.orderInfo.goods as StoreState.GoodsInOrder[];\n    this.orderInfo.goods = goods.map(good => ({\n      goodId: good._id,\n      count: good.count,\n    }));\n\n    console.log('this.currentUser: ', this.currentUser);\n    this.orderInfo.userId = this.currentUser._id;\n    this.orderInfo.amount = goods.reduce(function(ret, cur) {\n      return cur.originPrice + ret;\n    }, 0);\n\n    this.submitOrder(this.orderInfo).then((res: StoreState.ResponseData) => {\n      if (res.status === 201) {\n        const { order, payurl } = res.result;\n        const orderId = order._id;\n        window.location = payurl;\n        // this.$router.push({ name: 'payorder', params: orderId });\n      }\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=b02679c6&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=b02679c6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b02679c6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}