(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793821bf"],{a2f2:function(e,t,r){"use strict";var o=r("a43a"),a=r.n(o);a.a},a43a:function(e,t,r){},bcc0:function(e,t,r){"use strict";r.r(t);var o,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order order-wrap"},[r("mt-header",{attrs:{fixed:"",title:"确认下单"}},[r("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[r("mt-button",{attrs:{icon:"back"}})],1)],1),r("div",{staticClass:"order-content"},[r("section",[r("h5",[e._v("收货人姓名")]),r("mt-field",{attrs:{placeholder:"填写收货人姓名",type:"tel"},model:{value:e.orderInfo.receiverName,callback:function(t){e.$set(e.orderInfo,"receiverName",t)},expression:"orderInfo.receiverName"}})],1),r("section",[r("h5",[e._v("收货人电话")]),r("mt-field",{attrs:{placeholder:"填写收货人电话",type:"tel"},model:{value:e.orderInfo.receiverPhone,callback:function(t){e.$set(e.orderInfo,"receiverPhone",t)},expression:"orderInfo.receiverPhone"}})],1),r("section",[r("h5",[e._v("收货地址")]),r("mt-field",{attrs:{placeholder:"填写收货地址",type:"textarea",rows:"4"},model:{value:e.orderInfo.receiverAddress,callback:function(t){e.$set(e.orderInfo,"receiverAddress",t)},expression:"orderInfo.receiverAddress"}})],1),r("section",[r("div",{staticClass:"cart-area"},[r("div",{staticClass:"cart-list"},e._l(e.orderInfo.releatedGoods,function(t){return e.orderInfo.releatedGoods?r("div",{key:t.good._id,staticClass:"cart-item"},[r("div",{staticClass:"cart-item-box"},[r("div",{staticClass:"item-detail"},[r("div",[r("div",{staticClass:"item-img"},[r("a",[r("img",{attrs:{src:e.getThumb(t)}})])]),r("div",{staticClass:"item-info"},[r("a",{attrs:{href:""}},[r("h3",{staticClass:"title"},[e._v(e._s(t.good.title))])]),r("div",{staticClass:"pay"},[r("div",{staticClass:"pay-price"},[r("div",{staticClass:"price"},[r("p",{staticClass:"o-t-price"},[r("span",{staticClass:"major"},[e._v(e._s(t.good.purchasePrice))])])])])])])])])])]):e._e()}),0)])]),e._m(0),r("section",[r("div",{staticClass:"order-info price"},[r("span",[e._v("商品总额")]),r("h5",[e._v("￥"+e._s(e.getPrice(e.orderInfo)))])]),r("div",{staticClass:"order-info"},[r("span",[e._v("运费")]),r("h5",[e._v(e._s(e.getPostage(e.orderInfo)))])])])]),r("div",{staticClass:"order-footer"},[r("h5",{staticClass:"order-total-price"},[e._v("合计：￥"+e._s(e.toFixed(e.orderInfo.total)))]),r("button",{staticClass:"bottom-bar-btn buy",on:{click:function(t){return e.handleSubmitOrder()}}},[e._v("确认下单")])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"order-info"},[r("span",[e._v("支付方式")]),r("h5",[e._v("在线支付")])]),r("div",{staticClass:"order-info"},[r("span",[e._v("配送方式")]),r("h5",[e._v("快递配送")])])])}],i=r("bd86"),n=(r("7f7f"),r("e814")),c=r.n(n),d=r("d225"),l=r("b0b4"),u=r("308d"),v=r("6bb5"),f=r("4e2b"),b=r("9ab4"),h=r("60a3"),p=r("4bb5"),m=r("76a0"),g=r("d257"),I=function(e){function t(){return Object(d["a"])(this,t),Object(u["a"])(this,Object(v["a"])(t).apply(this,arguments))}return Object(f["a"])(t,e),Object(l["a"])(t,[{key:"getThumb",value:function(e){return this.orderInfo.coverImg?this.orderInfo.coverImg:e.good&&e.good.imgs?e.good.imgs[0].url:void 0}},{key:"getPrice",value:function(e){if(e.releatedGoods&&e.releatedGoods.length>0)return e.releatedGoods[0].good.purchasePrice.toFixed(2)}},{key:"getPostage",value:function(e){if(console.log("orderInfo: ",e),e.releatedGoods.length){var t=e.releatedGoods[0].good.postage;console.log("postage: ",t);var r={SHIPPING:"包邮",PAY:"到付"};return"SHIPPING"===t||"PAY"===t?r[t]:"￥ ".concat(c()(t))}}},{key:"toFixed",value:function(e){return e?e.toFixed(2):0}},{key:"changeGoodCount",value:function(e,t){switch(console.log("good: ",e),t){case"minus":e.count-=1;break;case"plus":e.count+=1;break;default:break}this.changeOrderGood(e)}},{key:"handleSubmitOrder",value:function(){this.orderInfo.receiverName?this.orderInfo.receiverAddress?this.orderInfo.receiverPhone?Object(g["a"])(this.orderInfo.receiverPhone)?this.submitOrder(this.orderInfo).then(function(e){if(201===e.status){var t=e.result,r=t.order,o=t.payurl;r._id;window.location=o}}):Object(m["Toast"])({message:"手机号格式不正确！"}):Object(m["Toast"])({message:"收货人手机号不能为空！"}):Object(m["Toast"])({message:"收货地址不能为空！"}):Object(m["Toast"])({message:"收货人姓名不能为空！"})}}]),t}(h["c"]);b["a"]([Object(p["b"])("orderInfo",{namespace:"order"})],I.prototype,"orderInfo",void 0),b["a"]([Object(p["b"])("currentUser",{namespace:"auth"})],I.prototype,"currentUser",void 0),b["a"]([Object(p["a"])("order/changeOrderGood")],I.prototype,"changeOrderGood",void 0),b["a"]([Object(p["a"])("order/submitOrder")],I.prototype,"submitOrder",void 0),I=b["a"]([Object(h["a"])({components:(o={},Object(i["a"])(o,m["Header"].name,m["Header"]),Object(i["a"])(o,m["Button"].name,m["Button"]),Object(i["a"])(o,m["Field"].name,m["Field"]),o)})],I);var _=I,O=_,C=(r("a2f2"),r("2877")),j=Object(C["a"])(O,a,s,!1,null,"07c935d4",null);t["default"]=j.exports}}]);
//# sourceMappingURL=chunk-793821bf.042d7575.js.map