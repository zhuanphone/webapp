(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a6293a1"],{bcc0:function(e,t,r){"use strict";r.r(t);var o,a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order order-wrap"},[r("mt-header",{attrs:{fixed:"",title:"确认下单"}},[r("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[r("mt-button",{attrs:{icon:"back"}})],1)],1),r("div",{staticClass:"order-content"},[r("section",[r("h5",[e._v("收货人姓名")]),r("mt-field",{attrs:{placeholder:"填写收货人姓名",type:"tel"},model:{value:e.orderInfo.receivername,callback:function(t){e.$set(e.orderInfo,"receivername",t)},expression:"orderInfo.receivername"}})],1),r("section",[r("h5",[e._v("收货人电话")]),r("mt-field",{attrs:{placeholder:"填写收货人电话",type:"tel"},model:{value:e.orderInfo.phone,callback:function(t){e.$set(e.orderInfo,"phone",t)},expression:"orderInfo.phone"}})],1),r("section",[r("h5",[e._v("收货地址")]),r("mt-field",{attrs:{placeholder:"填写收货地址",type:"textarea",rows:"4"},model:{value:e.orderInfo.address,callback:function(t){e.$set(e.orderInfo,"address",t)},expression:"orderInfo.address"}})],1),r("section",[r("div",{staticClass:"cart-area"},[r("div",{staticClass:"cart-list"},e._l(e.orderInfo.goods,function(t){return e.orderInfo.goods?r("div",{key:t.id,staticClass:"cart-item"},[r("div",{staticClass:"cart-item-box"},[r("div",{staticClass:"item-detail"},[r("div",[r("div",{staticClass:"item-img"},[r("a",[r("img",{attrs:{src:e.getThumb(t)}})])]),r("div",{staticClass:"item-info"},[r("a",{attrs:{href:""}},[r("h3",{staticClass:"title"},[e._v(e._s(t.name))])]),r("div",{staticClass:"pay"},[r("div",{staticClass:"pay-price"},[r("div",{staticClass:"price"},[r("p",{staticClass:"o-t-price"},[r("span",{staticClass:"major"},[e._v(e._s(t.purchasePrice))])])])])])])])])])]):e._e()}),0)])]),e._m(0),r("section",[r("div",{staticClass:"order-info price"},[r("span",[e._v("商品总额")]),r("h5",[e._v("￥"+e._s(e.getPrice(e.orderInfo)))])]),e._m(1)])]),r("div",{staticClass:"order-footer"},[r("h5",{staticClass:"order-total-price"},[e._v("合计：￥"+e._s(e.toFixed(e.orderInfo.amount)))]),r("button",{staticClass:"bottom-bar-btn buy",on:{click:function(t){return e.handleSubmitOrder()}}},[e._v("确认下单")])])],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"order-info"},[r("span",[e._v("支付方式")]),r("h5",[e._v("在线支付")])]),r("div",{staticClass:"order-info"},[r("span",[e._v("配送方式")]),r("h5",[e._v("快递配送")])])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-info"},[r("span",[e._v("运费")]),r("h5",[e._v("￥0.00")])])}],i=r("bd86"),n=(r("7f7f"),r("d225")),c=r("b0b4"),d=r("308d"),l=r("6bb5"),u=r("4e2b"),f=r("9ab4"),v=r("60a3"),b=r("4bb5"),p=r("76a0"),h=r("d257"),m=function(e){function t(){return Object(n["a"])(this,t),Object(d["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(c["a"])(t,[{key:"getThumb",value:function(e){if(e&&e.imgs)return e.imgs[0].url}},{key:"getPrice",value:function(e){if(e.goods&&e.goods.length>0)return e.goods[0].purchasePrice.toFixed(2)}},{key:"toFixed",value:function(e){return console.log("num.toFixed(2): ",e.toFixed(2)),e?e.toFixed(2):0}},{key:"changeGoodCount",value:function(e,t){switch(console.log("good: ",e),t){case"minus":e.count-=1;break;case"plus":e.count+=1;break;default:break}this.changeOrderGood(e)}},{key:"handleSubmitOrder",value:function(){if(this.orderInfo.address)if(this.orderInfo.phone)if(Object(h["a"])(this.orderInfo.phone)){var e=this.orderInfo.goods;this.orderInfo.goods=e.map(function(e){return{id:e._id,count:e.count}}),this.orderInfo.amount=e.reduce(function(e,t){return t.purchasePrice+e},0),this.submitOrder(this.orderInfo).then(function(e){if(201===e.status){var t=e.result,r=t.order,o=t.payurl;r._id;window.location=o}})}else Object(p["Toast"])({message:"手机号格式不正确！"});else Object(p["Toast"])({message:"收货人手机号不能为空！"});else Object(p["Toast"])({message:"收货地址不能为空！"})}}]),t}(v["c"]);f["a"]([Object(b["b"])("orderInfo",{namespace:"order"})],m.prototype,"orderInfo",void 0),f["a"]([Object(b["b"])("currentUser",{namespace:"auth"})],m.prototype,"currentUser",void 0),f["a"]([Object(b["a"])("order/changeOrderGood")],m.prototype,"changeOrderGood",void 0),f["a"]([Object(b["a"])("order/submitOrder")],m.prototype,"submitOrder",void 0),m=f["a"]([Object(v["a"])({components:(o={},Object(i["a"])(o,p["Header"].name,p["Header"]),Object(i["a"])(o,p["Button"].name,p["Button"]),Object(i["a"])(o,p["Field"].name,p["Field"]),o)})],m);var _=m,g=_,O=(r("f051"),r("2877")),C=Object(O["a"])(g,a,s,!1,null,"7c604f05",null);t["default"]=C.exports},cc5a:function(e,t,r){},f051:function(e,t,r){"use strict";var o=r("cc5a"),a=r.n(o);a.a}}]);
//# sourceMappingURL=chunk-6a6293a1.fa3d0e6e.js.map