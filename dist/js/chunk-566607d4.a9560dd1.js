(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-566607d4"],{"3eda":function(t,e,r){},"53a7":function(t,e,r){"use strict";var s=r("3eda"),a=r.n(s);a.a},bcc0:function(t,e,r){"use strict";r.r(e);var s,a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"order order-wrap"},[r("mt-header",{attrs:{fixed:"",title:"填写订单"}},[r("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[r("mt-button",{attrs:{icon:"back"}})],1)],1),r("div",{staticClass:"order-content"},[r("section",[r("h4",[t._v("收货地址")]),r("mt-field",{attrs:{placeholder:"填写收货地址",type:"textarea",rows:"4"},model:{value:t.orderInfo.address,callback:function(e){t.$set(t.orderInfo,"address",e)},expression:"orderInfo.address"}})],1),r("section",[r("h4",[t._v("商品列表")]),r("div",{staticClass:"cart-area"},[r("div",{staticClass:"cart-list"},t._l(t.orderInfo.goods,function(e){return t.orderInfo.goods?r("div",{key:e.id,staticClass:"cart-item"},[r("div",{staticClass:"cart-item-box"},[r("div",{staticClass:"item-detail"},[r("div",[r("div",{staticClass:"item-img"},[r("a",[r("img",{attrs:{src:e.imgs[0].url}})])]),r("div",{staticClass:"item-info"},[r("a",{attrs:{href:""}},[r("h3",{staticClass:"title"},[t._v(t._s(e.name))])]),r("div",{staticClass:"pay"},[r("div",{staticClass:"pay-price"},[r("div",{staticClass:"price"},[r("p",{staticClass:"o-t-price"},[r("span",{staticClass:"major"},[t._v(t._s(e.originPrice))])])])]),r("div",{staticClass:"edit-quantity"},[r("p",{staticClass:"btn-minus",on:{click:function(r){return r.preventDefault(),t.actionBuyQuantity(e,"minus")}}},[r("a",{staticClass:"sbtn minus off"},[r("icon",{attrs:{name:"minus"}})],1)]),r("p",{staticClass:"btn-input"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.count,expression:"good.count",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:e.count},on:{blur:[function(r){return t.actionBuyQuantity(e,"input")},function(e){return t.$forceUpdate()}],input:function(r){r.target.composing||t.$set(e,"count",t._n(r.target.value))}}})]),r("p",{staticClass:"btn-plus",on:{click:function(r){return r.preventDefault(),t.actionBuyQuantity(e,"plus")}}},[r("a",{staticClass:"sbtn plus"},[r("icon",{attrs:{name:"plus"}})],1)])])])])])])])]):t._e()}),0)])])]),r("div",{staticClass:"order-footer"},[r("h5",{staticClass:"order-total-price"},[t._v("￥"+t._s(t.orderAmount))]),r("button",{staticClass:"bottom-bar-btn buy",on:{click:function(e){return t.handleSubmitOrder()}}},[t._v("提交订单")])])],1)},n=[],i=r("bd86"),o=(r("7f7f"),r("d225")),c=r("b0b4"),u=r("308d"),d=r("6bb5"),l=r("4e2b"),b=r("9ab4"),f=r("60a3"),p=r("4bb5"),m=r("76a0"),v=function(t){function e(){return Object(o["a"])(this,e),Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments))}return Object(l["a"])(e,t),Object(c["a"])(e,[{key:"handleSubmitOrder",value:function(){var t=this.orderInfo.goods;this.orderInfo.goods=t.map(function(t){return{goodId:t._id,count:t.count}}),console.log("this.currentUser: ",this.currentUser),this.orderInfo.userId=this.currentUser._id,this.orderInfo.amount=t.reduce(function(t,e){return e.originPrice+t},0),this.submitOrder(this.orderInfo).then(function(t){if(201===t.status){var e=t.result,r=e.order,s=e.payurl;r._id;window.location=s}})}},{key:"orderAmount",get:function(){var t=this.orderInfo.goods.reduce(function(t,e){return t+e.originPrice},0);return t.toFixed(2)}}]),e}(f["c"]);b["a"]([Object(p["b"])("orderInfo",{namespace:"order"})],v.prototype,"orderInfo",void 0),b["a"]([Object(p["b"])("currentUser",{namespace:"auth"})],v.prototype,"currentUser",void 0),b["a"]([Object(p["a"])("order/submitOrder")],v.prototype,"submitOrder",void 0),v=b["a"]([Object(f["a"])({components:(s={},Object(i["a"])(s,m["Header"].name,m["Header"]),Object(i["a"])(s,m["Button"].name,m["Button"]),Object(i["a"])(s,m["Field"].name,m["Field"]),s)})],v);var h=v,C=h,y=(r("53a7"),r("2877")),g=Object(y["a"])(C,a,n,!1,null,"b02679c6",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-566607d4.a9560dd1.js.map