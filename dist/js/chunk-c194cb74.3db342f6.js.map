{"version":3,"sources":["webpack:///./src/views/Order/Order.vue?cdc8","webpack:///./src/views/Order/Order.vue","webpack:///./src/views/Order/Order.vue?baab","webpack:///./src/views/Order/Order.vue?d01d","webpack:///./src/views/Order/Order.vue?444a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","fixed","title","slot","to","icon","_v","placeholder","type","rows","model","value","orderInfo","callback","$$v","$set","expression","_l","good","key","id","src","getThumb","href","_s","name","purchasePrice","on","click","$event","preventDefault","changeGoodCount","directives","rawName","modifiers","number","domProps","blur","$forceUpdate","input","target","composing","_n","_e","amount","handleSubmitOrder","staticRenderFns","Ordervue_type_script_lang_ts_Order","_Vue","Order","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","apply","arguments","inherits","createClass","imgs","url","action","console","log","count","changeOrderGood","address","phone","utils","goods","map","_id","reduce","ret","cur","submitOrder","then","res","status","_res$result","result","order","payurl","window","location","mint_ui_common","message","vue_property_decorator","tslib_es6","lib","namespace","components","_components","defineProperty","Ordervue_type_script_lang_ts_","Order_Ordervue_type_script_lang_ts_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_6c0f8d49_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Order_vue_vue_type_style_index_0_id_6c0f8d49_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"gJAAA,MAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,oBAA+B,CAAAF,EAAA,aAAkBG,MAAA,CAAOC,MAAA,GAAAC,MAAA,SAA2B,CAAAL,EAAA,eAAoBG,MAAA,CAAOG,KAAA,OAAAC,GAAA,KAAuBD,KAAA,QAAa,CAAAN,EAAA,aAAkBG,MAAA,CAAOK,KAAA,WAAe,OAAAR,EAAA,OAAoBE,YAAA,iBAA4B,CAAAF,EAAA,WAAAA,EAAA,MAAAJ,EAAAa,GAAA,UAAAT,EAAA,YAAyDG,MAAA,CAAOO,YAAA,SAAAC,KAAA,WAAAC,KAAA,KAAoDC,MAAA,CAAQC,MAAAlB,EAAAmB,UAAA,QAAAC,SAAA,SAAAC,GAAuDrB,EAAAsB,KAAAtB,EAAAmB,UAAA,UAAAE,IAAwCE,WAAA,wBAAiC,GAAAnB,EAAA,WAAAA,EAAA,MAAAJ,EAAAa,GAAA,WAAAT,EAAA,YAA8DG,MAAA,CAAOO,YAAA,UAAAC,KAAA,OAAqCE,MAAA,CAAQC,MAAAlB,EAAAmB,UAAA,MAAAC,SAAA,SAAAC,GAAqDrB,EAAAsB,KAAAtB,EAAAmB,UAAA,QAAAE,IAAsCE,WAAA,sBAA+B,GAAAnB,EAAA,WAAAA,EAAA,MAAAJ,EAAAa,GAAA,UAAAT,EAAA,OAAwDE,YAAA,aAAwB,CAAAF,EAAA,OAAYE,YAAA,aAAwBN,EAAAwB,GAAAxB,EAAAmB,UAAA,eAAAM,GAA6C,OAAAzB,EAAAmB,UAAA,MAAAf,EAAA,OAAuCsB,IAAAD,EAAAE,GAAArB,YAAA,aAAoC,CAAAF,EAAA,OAAYE,YAAA,iBAA4B,CAAAF,EAAA,OAAYE,YAAA,eAA0B,CAAAF,EAAA,OAAAA,EAAA,OAAsBE,YAAA,YAAuB,CAAAF,EAAA,KAAAA,EAAA,OAAoBG,MAAA,CAAOqB,IAAA5B,EAAA6B,SAAAJ,UAA0BrB,EAAA,OAAgBE,YAAA,aAAwB,CAAAF,EAAA,KAAUG,MAAA,CAAOuB,KAAA,KAAW,CAAA1B,EAAA,MAAWE,YAAA,SAAoB,CAAAN,EAAAa,GAAAb,EAAA+B,GAAAN,EAAAO,WAAA5B,EAAA,OAA0CE,YAAA,OAAkB,CAAAF,EAAA,OAAYE,YAAA,aAAwB,CAAAF,EAAA,OAAYE,YAAA,SAAoB,CAAAF,EAAA,KAAUE,YAAA,aAAwB,CAAAF,EAAA,QAAaE,YAAA,SAAoB,CAAAN,EAAAa,GAAAb,EAAA+B,GAAAN,EAAAQ,wBAAA7B,EAAA,OAAuDE,YAAA,iBAA4B,CAAAF,EAAA,KAAUE,YAAA,YAAA4B,GAAA,CAA4BC,MAAA,SAAAC,GAAiD,OAAxBA,EAAAC,iBAAwBrC,EAAAsC,gBAAAb,EAAA,YAA4C,CAAArB,EAAA,KAAUE,YAAA,kBAA6B,CAAAF,EAAA,QAAaG,MAAA,CAAOyB,KAAA,YAAgB,KAAA5B,EAAA,KAAgBE,YAAA,aAAwB,CAAAF,EAAA,SAAcmC,WAAA,EAAaP,KAAA,QAAAQ,QAAA,iBAAAtB,MAAAO,EAAA,MAAAF,WAAA,aAAAkB,UAAA,CAA4FC,QAAA,KAAenC,MAAA,CAASQ,KAAA,UAAgB4B,SAAA,CAAWzB,MAAAO,EAAA,OAAqBS,GAAA,CAAKU,KAAA,UAAAR,GAAyB,OAAApC,EAAAsC,gBAAAb,EAAA,UAA0C,SAAAW,GAAkB,OAAApC,EAAA6C,iBAA0BC,MAAA,SAAAV,GAA2BA,EAAAW,OAAAC,WAAsChD,EAAAsB,KAAAG,EAAA,QAAAzB,EAAAiD,GAAAb,EAAAW,OAAA7B,cAAuDd,EAAA,KAAYE,YAAA,WAAA4B,GAAA,CAA2BC,MAAA,SAAAC,GAAiD,OAAxBA,EAAAC,iBAAwBrC,EAAAsC,gBAAAb,EAAA,WAA2C,CAAArB,EAAA,KAAUE,YAAA,aAAwB,CAAAF,EAAA,QAAaG,MAAA,CAAOyB,KAAA,WAAe,mBAAAhC,EAAAkD,OAA+B,SAAA9C,EAAA,OAAqBE,YAAA,gBAA2B,CAAAF,EAAA,MAAWE,YAAA,qBAAgC,CAAAN,EAAAa,GAAA,IAAAb,EAAA+B,GAAA/B,EAAAmB,UAAAgC,WAAA/C,EAAA,UAA0DE,YAAA,qBAAA4B,GAAA,CAAqCC,MAAA,SAAAC,GAAyB,OAAApC,EAAAoD,uBAAiC,CAAApD,EAAAa,GAAA,iBAC7sFwC,EAAA,mJCgGqBC,EAArB,SAAAC,GAAA,SAAAC,IAAA,OAAAC,OAAAC,EAAA,KAAAD,CAAAxD,KAAAuD,GAAAC,OAAAE,EAAA,KAAAF,CAAAxD,KAAAwD,OAAAG,EAAA,KAAAH,CAAAD,GAAAK,MAAA5D,KAAA6D,YAAA,OAAAL,OAAAM,EAAA,KAAAN,CAAAD,EAAAD,GAAAE,OAAAO,EAAA,KAAAP,CAAAD,EAAA,EAAA9B,IAAA,WAAAR,MAAA,SAeWO,GACP,GAAIA,GAAQA,EAAKwC,KACf,OAAOxC,EAAKwC,KAAK,GAAGC,MAjB1B,CAAAxC,IAAA,kBAAAR,MAAA,SAwB0BO,EAA+B0C,GAErD,OADAC,QAAQC,IAAI,SAAU5C,GACd0C,GACN,IAAK,QACH1C,EAAK6C,OAAS,EACd,MACF,IAAK,OACH7C,EAAK6C,OAAS,EACd,MACF,QACE,MAEJrE,KAAKsE,gBAAgB9C,KApCzB,CAAAC,IAAA,oBAAAR,MAAA,WA2CI,GAAKjB,KAAKkB,UAAUqD,QAOpB,GAAKvE,KAAKkB,UAAUsD,MAOpB,GAAKhB,OAAAiB,EAAA,KAAAjB,CAAiBxD,KAAKkB,UAAUsD,OAArC,CAOA,IAAME,EAAQ1E,KAAKkB,UAAUwD,MAC7B1E,KAAKkB,UAAUwD,MAAQA,EAAMC,IAAI,SAAAnD,GAAI,MAAK,CACxCE,GAAIF,EAAKoD,IACTP,MAAO7C,EAAK6C,SAIdrE,KAAKkB,UAAUgC,OAASwB,EAAMG,OAAO,SAASC,EAAKC,GACjD,OAAOA,EAAI/C,cAAgB8C,GAC1B,GAEH9E,KAAKgF,YAAYhF,KAAKkB,WAAW+D,KAAK,SAACC,GACrC,GAAmB,MAAfA,EAAIC,OAAgB,KAAAC,EACIF,EAAIG,OAAtBC,EADcF,EACdE,MAAOC,EADOH,EACPG,OACCD,EAAMV,IACtBY,OAAOC,SAAWF,UArBpB/B,OAAAkC,EAAA,SAAAlC,CAAM,CACJmC,QAAS,mBARXnC,OAAAkC,EAAA,SAAAlC,CAAM,CACJmC,QAAS,qBARXnC,OAAAkC,EAAA,SAAAlC,CAAM,CACJmC,QAAS,kBA7CjBpC,EAAA,CAAmCqC,EAAA,MAEjCC,EAAA,MADCrC,OAAAsC,EAAA,KAAAtC,CAAO,YAAa,CAAEuC,UAAW,2CAIlCF,EAAA,MADCrC,OAAAsC,EAAA,KAAAtC,CAAO,cAAe,CAAEuC,UAAW,4CAkBpCF,EAAA,MADCrC,OAAAsC,EAAA,KAAAtC,CAAO,gEAmBRqC,EAAA,MADCrC,OAAAsC,EAAA,KAAAtC,CAAO,wDAvCWH,EAAKwC,EAAA,MAPzBrC,OAAAoC,EAAA,KAAApC,CAAU,CACTwC,YAAUC,EAAA,GAAAzC,OAAA0C,EAAA,KAAA1C,CAAAyC,EACPP,EAAA,UAAO3D,KAAO2D,EAAA,WADPlC,OAAA0C,EAAA,KAAA1C,CAAAyC,EAEPP,EAAA,UAAO3D,KAAO2D,EAAA,WAFPlC,OAAA0C,EAAA,KAAA1C,CAAAyC,EAGPP,EAAA,SAAM3D,KAAO2D,EAAA,UAHNO,MAMS5C,GAAA,IAAA8C,EAAA,ECjG6XC,EAAA,0BCQlZC,EAAgB7C,OAAA8C,EAAA,KAAA9C,CACd4C,EACAtG,EACAsD,GACF,EACA,KACA,WACA,MAIemD,EAAA,WAAAF,6CCnBf,IAAAG,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAsjBE,EAAG","file":"js/chunk-c194cb74.3db342f6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"order order-wrap\"},[_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"填写订单\"}},[_c('router-link',{attrs:{\"slot\":\"left\",\"to\":\"/\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"}})],1)],1),_c('div',{staticClass:\"order-content\"},[_c('section',[_c('h5',[_vm._v(\"收货地址\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货地址\",\"type\":\"textarea\",\"rows\":\"4\"},model:{value:(_vm.orderInfo.address),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"address\", $$v)},expression:\"orderInfo.address\"}})],1),_c('section',[_c('h5',[_vm._v(\"收货人电话\")]),_c('mt-field',{attrs:{\"placeholder\":\"填写收货人电话\",\"type\":\"tel\"},model:{value:(_vm.orderInfo.phone),callback:function ($$v) {_vm.$set(_vm.orderInfo, \"phone\", $$v)},expression:\"orderInfo.phone\"}})],1),_c('section',[_c('h5',[_vm._v(\"商品列表\")]),_c('div',{staticClass:\"cart-area\"},[_c('div',{staticClass:\"cart-list\"},_vm._l((_vm.orderInfo.goods),function(good){return (_vm.orderInfo.goods)?_c('div',{key:good.id,staticClass:\"cart-item\"},[_c('div',{staticClass:\"cart-item-box\"},[_c('div',{staticClass:\"item-detail\"},[_c('div',[_c('div',{staticClass:\"item-img\"},[_c('a',[_c('img',{attrs:{\"src\":_vm.getThumb(good)}})])]),_c('div',{staticClass:\"item-info\"},[_c('a',{attrs:{\"href\":\"\"}},[_c('h3',{staticClass:\"title\"},[_vm._v(_vm._s(good.name))])]),_c('div',{staticClass:\"pay\"},[_c('div',{staticClass:\"pay-price\"},[_c('div',{staticClass:\"price\"},[_c('p',{staticClass:\"o-t-price\"},[_c('span',{staticClass:\"major\"},[_vm._v(_vm._s(good.purchasePrice))])])])]),_c('div',{staticClass:\"edit-quantity\"},[_c('p',{staticClass:\"btn-minus\",on:{\"click\":function($event){$event.preventDefault();return _vm.changeGoodCount(good, 'minus')}}},[_c('a',{staticClass:\"sbtn minus off\"},[_c('icon',{attrs:{\"name\":\"minus\"}})],1)]),_c('p',{staticClass:\"btn-input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(good.count),expression:\"good.count\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\"},domProps:{\"value\":(good.count)},on:{\"blur\":[function($event){return _vm.changeGoodCount(good, 'input')},function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.$set(good, \"count\", _vm._n($event.target.value))}}})]),_c('p',{staticClass:\"btn-plus\",on:{\"click\":function($event){$event.preventDefault();return _vm.changeGoodCount(good, 'plus')}}},[_c('a',{staticClass:\"sbtn plus\"},[_c('icon',{attrs:{\"name\":\"plus\"}})],1)])])])])])])])]):_vm._e()}),0)])])]),_c('div',{staticClass:\"order-footer\"},[_c('h5',{staticClass:\"order-total-price\"},[_vm._v(\"￥\"+_vm._s(_vm.orderInfo.amount))]),_c('button',{staticClass:\"bottom-bar-btn buy\",on:{\"click\":function($event){return _vm.handleSubmitOrder()}}},[_vm._v(\"提交订单\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nimport { State, Action, Getter } from 'vuex-class';\n\nimport { Header, Button, Field, Toast } from 'mint-ui';\nimport { checkPhoneNumber } from '@/utils';\n\n@Component({\n  components: {\n    [Header.name]: Header,\n    [Button.name]: Button,\n    [Field.name]: Field,\n  },\n})\nexport default class Order extends Vue {\n  @Getter('orderInfo', { namespace: 'order' })\n  orderInfo: any;\n\n  @Getter('currentUser', { namespace: 'auth' })\n  currentUser: any;\n\n  // get orderAmount() {\n  //   const ret = (this.orderInfo.goods as any[]).reduce(function(ret, cur) {\n  //     return ret + cur.originPrice;\n  //   }, 0);\n\n  //   return ret.toFixed(2);\n  // }\n\n  getThumb(good: StoreState.Goods) {\n    if (good && good.imgs) {\n      return good.imgs[0].url;\n    }\n  }\n\n  @Action('order/changeOrderGood')\n  changeOrderGood: any;\n\n  private changeGoodCount(good: StoreState.GoodsInOrder, action: string) {\n    console.log('good: ', good);\n    switch (action) {\n      case 'minus':\n        good.count -= 1;\n        break;\n      case 'plus':\n        good.count += 1;\n        break;\n      default:\n        break;\n    }\n    this.changeOrderGood(good);\n  }\n\n  @Action('order/submitOrder')\n  submitOrder: any;\n\n  private handleSubmitOrder() {\n    if (!this.orderInfo.address) {\n      Toast({\n        message: '收货地址不能为空！',\n      });\n      return;\n    }\n\n    if (!this.orderInfo.phone) {\n      Toast({\n        message: '收货人手机号不能为空！',\n      });\n      return;\n    }\n\n    if (!checkPhoneNumber(this.orderInfo.phone)) {\n      Toast({\n        message: '手机号格式不正确！',\n      });\n      return;\n    }\n\n    const goods = this.orderInfo.goods as StoreState.GoodsInOrder[];\n    this.orderInfo.goods = goods.map(good => ({\n      id: good._id,\n      count: good.count,\n    }));\n\n    // this.orderInfo.userId = this.currentUser._id;\n    this.orderInfo.amount = goods.reduce(function(ret, cur) {\n      return cur.purchasePrice + ret;\n    }, 0);\n\n    this.submitOrder(this.orderInfo).then((res: StoreState.ResponseData) => {\n      if (res.status === 201) {\n        const { order, payurl } = res.result;\n        const orderId = order._id;\n        window.location = payurl;\n        // this.$router.push({ name: 'payorder', params: orderId });\n      }\n    });\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--14-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Order.vue?vue&type=template&id=6c0f8d49&scoped=true&\"\nimport script from \"./Order.vue?vue&type=script&lang=ts&\"\nexport * from \"./Order.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Order.vue?vue&type=style&index=0&id=6c0f8d49&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c0f8d49\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=6c0f8d49&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Order.vue?vue&type=style&index=0&id=6c0f8d49&lang=scss&scoped=true&\""],"sourceRoot":""}